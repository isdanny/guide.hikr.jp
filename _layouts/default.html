<!doctype html>
<html>
<head>
  <title>Hikr - {{ page.title }} </title>
  <link rel="stylesheet" href="{{site.url}}/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="{{site.url}}/css/leaflet.css"/>
  <link rel="stylesheet" href="{{site.url}}/css/hikr.css"/>
</head>
<body>


  <div class="navbar">
    <div class="container">
      <a href="{{site.url}}" class="brand navbar-brand">
        HIKR.jp
      </a>
      <ul class="nav navbar-nav pull-right">
        <li><a href="#">Areas</a></li>
        <li><a href="#">Levels</a></li>
      </ul>
    </div>
  </div>

  {{content}}

  <script type="text/javascript" src="{{site.url}}/js/jquery-2.0.3.min.js"></script>
  <script type="text/javasceipt" src="{{site.url}}/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="{{site.url}}/js/leaflet.js"></script>
  <script type="text/javascript" src="{{site.url}}/js/hikr.js"></script>

{% if page.map %}
    <script>
      var map = L.map('map').setView([51.505, -0.09], 13);

      L.tileLayer('http://{s}.tiles.mapbox.com/v3/hikr.map-gtn520tv/{z}/{x}/{y}.png', {
          attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">MapBox</a>',
          maxZoom: 15
      }).addTo(map);

      var myStyle = {
          "color": "#000000",
          "weight": 3,
          "opacity": 0.65
      };

      $(document).ready(function(){
        $.get('{{site.url}}/data/{{page.map}}',function(data){
          var geojsonFeature = data;
          // L.geoJson(geojsonFeature).addTo(map);
          var myLayer = L.geoJson().addTo(map);
          myLayer.addData(geojsonFeature).setStyle(myStyle);
          map.fitBounds(myLayer.getBounds());
        })
      })
    </script>
{% endif %}

</body>
</html>